let input = '        /--------------------------------------------------------\\  /---------\\                                              /------------------\\     \n' +
  '        |                                        /---------------+--+--\\      |                                              |                  |     \n' +
  '        |                                        |   /-----------+--+--+------+---------------------------------------\\      |                  |     \n' +
  '        |               /------------------------+---+-----------+--+--+------+-\\                                     |      |                  |     \n' +
  '        |       /-------+------------------------+---+-----------+--+--+------+-+---------------------------\\         |      |                  |     \n' +
  '        |       |       |                        |   |           |  |  |    /-+-+-------------\\             |         |      |                  |     \n' +
  '        |       |       |      /-----------------+---+-----------+--+--+----+-+-+-------------+-------------+---------+------+----\\             |     \n' +
  '        |       |       | /----+-----------------+---+-----------+--+--+----+-+-+-------------+-------------+---------+------+\\   |             |     \n' +
  '        |     /-+-------+-+----+-----------------+---+-----------+--+--+----+-+-+-------------+------------\\| /-------+------++---+----\\        |     \n' +
  '/-------+-----+-+-------+>+----+--------\\        |   |           |  |  |    | | |             |            || |       |      ||   |    |        |     \n' +
  '|       |     | |   /---+-+--\\ |        |        |   |           |  \\--+----+-/ |             |            || |       |      |^   |    |        |     \n' +
  '|       |     | |   |   | |  | |        |    /---+---+-----------+-----+----+---+-------------+-\\          || |  /----+------++---+----+-\\      |     \n' +
  '|       \\-----+-+---+---+-+--+-+--------+----+---+---+>----------/     |    |  /+-------------+-+----------++-+--+----+------++\\  |    | |      |     \n' +
  '|             | |/--+---+-+--+-+--------+----+---+---+-----------------+----+--++-------------+-+----------++-+--+----+--\\   |||  |    | |      |     \n' +
  '|   /---------+-++--+---+-+--+-+\\    /--+----+---+---+-----------------+----+\\ ||             | |          || |  |    |  |   |||  |    | |      |     \n' +
  '|   |         | ||/-+---+-+--+-++----+--+----+---+---+-----\\           |   /++-++-------------+-+----------++-+--+----+\\/+---+++--+----+-+\\     |     \n' +
  '|   |         | ||| |  /+-+--+-++----+--+----+---+---+-\\   |           |   ||| ||             | |          || |  |    ||||   |||  |    | ||     |     \n' +
  '|   |         | ||| |  || |  | ||    |  |    |   |   | |   |   /-------+---+++-++-------------+-+----------++-+--+----++++---+++--+-\\  | ||     |     \n' +
  '|   |         | ||| |  || |  | \\+----+--+----+---+---+-+---+---+-------+---+++-++-------------+-+----------++-+--+----++++---+++--/ |  | ||     |     \n' +
  '|   |         | ||| |  || |  |  |    |  |    |   |   | |   |   |       |   ||| ||  /----------+-+----------++-+\\ |    ||||   |||    |  | ||     |     \n' +
  '|   |         | ||| |  || |  |  |    |  |    | /-+---+-+---+---+-------+---+++-++--+---------\\| |          || || |    ||||   |||    |  | ||     |     \n' +
  '|   |         | ||| |  || |  |  |    |  |    | | |   | | /-+---+-------+---+++-++--+---------++-+\\         || || |    ||||   |||    |  | ||     |     \n' +
  '|   |         | |\\+-+--++-+--+--+----+--+----+-+-+---+-+-+-+---+-------+---+++-++--+---------++-++---------++-++-+----+++/   |||    |  | ||     |     \n' +
  '|   |         | | | |  || |  |  |    |/-+----+-+-+---+-+-+-+---+-------+---+++-++--+---------++-++---------++-++-+----+++----+++----+-\\| ||     |     \n' +
  '|   |         | | | |  || |  | /+----++-+----+-+-+---+-+-+-+---+-------+---+++-++--+---------++-++----\\    || || |    |||    |||   /+-++-++----\\|     \n' +
  '|   |         | | | |  || |  | ||    || |    | | |   | | | |   |       |   ||| ||  |         || ||    |    || || |    |||/---+++---++-++-++----++--\\  \n' +
  '\\--<+---------+-+-+-+--++-+--+-++----++-/    | |/+---+-+-+-+---+-------+---+++-++--+-----\\   || ||    |    || || |    ||||   |||   || || ||    ||  |  \n' +
  ' /--+---------+-+-+-+--++-+--+-++----++------+-+++---+\\| | |   |       |   ||| ||  |     |   || ||    | /--++-++-+----++++---+++---++-++-++-\\  ||  |  \n' +
  ' |  |         | | | |  \\+-+--+-++----++------+-+++---++/ | |   |       |/--+++-++--+-----+---++-++----+-+-\\|| || |    ||||   |||   || || || |  ||  |  \n' +
  ' |  |         | | | |  /+-+--+-++----++------+-+++---++--+-+\\  |       ||  ||| ||  |     |   || ||    | | ||| || |    ||||   |||   || || || |  ||  |  \n' +
  ' |  |         | | | |  || |  | ||    ||      | |||   ||  ^ ||  |    /--++--+++-++--+--\\  |   || ||    | | ||| || |    ||||   |||   || || || |  ||  |  \n' +
  ' | /+---------+-+-+-+\\ || |  | ||    ||      | |||   ||  | ||  |    |  ||  |||/++--+--+--+---++-++----+-+-+++-++-+---<++++---+++---++\\|| || |  ||  |  \n' +
  ' | ||         | | | || || |  | ||    ||   /--+-+++---++--+-++--+----+--++--++++++--+--+-\\|   || ||    | | ||| \\+-+----++++---+++---++++/ || |  ||  |  \n' +
  ' | ^|         | | | || || |  | ||    ||   |  | |||   ||  | ||  |    |  ||  ||||||  |  | ||   || ||    | | |||  | |    ||||   |||   ||||  || |  ||  |  \n' +
  ' | ||         | | | || || |  | ||    ||   |  | ||\\---++--+-++--+----+--/|  ||||||  |  | ||   || ||    | | |||  | |    ||||   |||   ||||  || |  ||  |  \n' +
  ' | ||         | | | || || |  | ||    \\+---+--+-++----++--+-++--+----+---+--++/|||  |  | ||   || ||    | | |||  | |    ||||   |||   ||||  || |  ||  |  \n' +
  ' | ||     /---+-+-+-++-++-+--+-++-----+---+--+-++----++--+-++--+----+---+--++-+++--+--+-++---++\\||    | | |||  | |    ||||   |||   |||| /++-+--++-\\|  \n' +
  ' | ||     |   | | | || ||/+--+-++-----+---+--+-++----++--+-++--+----+--<+--++-+++--+--+-++---+++++----+\\| |||  | |    ||||   |||   |||| ||| |  || ||  \n' +
  ' | ||     |   | | | || ||||  | ||     |   |  | ||    ||  | ||  |    |   |  || |||  |  | ||   |||||    ||| |||  | |    |||| /-+++---++++-+++-+--++-++\\ \n' +
  ' | ||     |   | | | || ||||  | ||     |   |  | ||    ||  | ||  |    |   |/-++-+++--+--+-++---+++++----+++-+++--+-+----++++-+-+++---++++-+++-+\\ || ||| \n' +
  ' | ||     |   | | | || ||||  | ||     | /-+--+-++----++--+-++--+----+---++-++-+++--+--+-++---+++++----+++-+++-\\| |    ||\\+-+-+++---++++-++/ || || ||| \n' +
  ' | ||     |   | | | || ||||  | ||     | | |  | ||    || /+-++--+----+---++-++-+++--+--+-++---+++++----+++-+++-++-+----++-+\\| |||   \\+++-++--++-/| ||| \n' +
  ' | || /---+---+-+-+-++-++++--+-++-----+-+-+--+-++----++-++-++--+----+---++-++-+++--+--+-++---+++++---\\||| ||| || |    || ||| |||    ||| ||  ||  | ||| \n' +
  ' | || |   |   | | | || ||||  | ||     | | |  | |\\----++-++-++--+----+---++-++-+++--+--+-+/   |||||   |||| ||| || |    || ||| |||    ||| ||  ||  | ||| \n' +
  '/+-++-+---+---+-+-+-++-++++--+-++-----+-+-+--+\\|   /-++-++-++--+----+---++-++-+++--+--+-+----+++++-\\ |||| ||| || |    || ||| |||    ||| ||  ||  | ||| \n' +
  '|| || |   |   | | | || ||||  | ||     | | |  |||   | || || ||  |    |   || || \\++--+--+-+----+++++-+-++++-+++-++-+----++-+++-+++----+/| ||  ||  | ||| \n' +
  '|| |\\-+---+---+-+-+-++-++++--+-+/     | | |  ||\\---+-++-++-++--+----+---++-++--++--+--+-+----/|||| | |||| ||| || |    || ||| |||/---+-+-++--++\\ | ||| \n' +
  '|| |  |   |   | | | || ||||  | |  /---+-+-+--++----+-++-++-++--+----+---++-++--++--+--+\\|     |||| | |||| ||| || |    || ||| ||||   | | ||  ||| | ||| \n' +
  '|| |  |   |   | | | || ||||  | |  |  /+-+-+--++----+-++-++-++--+--\\ |   || ||  ||  |  |||     |||| | |||| |||/++-+----++-+++\\||||   | | ||  ||| | ||| \n' +
  '|| |  |   |   | | | || ||||  | |  |  || | |  ||    | || || ||  |  | |   || ||  ||  |  |||     |||| | |||| |||||| |    || ||||||||   | | ||  ||| | ||| \n' +
  '|| |  | /-+---+-+-+-++-++++--+-+--+--++-+-+--++----+-++-++-++--+--+-+---++-++--++--+--+++-----++++-+-++++\\|||||| |    || ||||||||   | | ||  ||| | ||| \n' +
  '|| |  | | |   | | | || ||||  | |  |  || | |  ||    | || || ||  |  | |   || ||  ||  |  |||     |||| |/+++++++++++-+--\\ || ||||||||   | | ||  ||| | ^|| \n' +
  '|| |  | | |   | | | || |||\\--+-+--+--++-+-+--++----+-++-++-++--+--+-+---++-++--++--+--+++-----++++-+++++++++++++-+--+-++-+++++/||   | | ||  ||| | ||| \n' +
  '|| |  | | |   | | | || |||   | |  |  || | |  ||    | || || ||  |  | |   || ||  ||  |  |||     |||| ||||||||||||| |  | || ||||\\-++---+-+-++--+++-/ ||| \n' +
  '|| |  | | |   | | | || |||   | |  |  || | |  ||    | || || ||  |  | |   || ||  ||  |  |||     |||| ||||||||||||| |  | || ||||  ||   | | ||  |||   ||| \n' +
  '|| |  | | |   | | | || |||/--+-+--+--++\\| |  ||    | || || ||  |  | |   || ||  ||  |  |||     |||| ||||||||||||| |  | || ||||  ||   | | ||  |||   ||| \n' +
  '|| |  \\-+-+---+-+-+-++-++++--+-+--+--++++-+--++----+-++-++-++--+--+-+---++-++--++--+--+++-----++++-++/|||||||||| |  | || ||||  ||   | | ||  |||   ||| \n' +
  '|| |    | |   | | | || ||||  | |  |  |||| |  ||    | || ||/++--+--+-+---++-++--++--+\\ |||     |||| || |||||||||| |  | || ||||  ||   | | ||  |||   ||| \n' +
  '|| |    | \\---+-+-+-++-++++--+-+--+--++++-+--++----+-++-+++++--+--+-+---++-++--++--++-+++-----+/|| || |||||||||| |  | || ||||  ||   | | ||  |||   ||| \n' +
  '|| |    |     | \\-+-++-++++--+-+--+--++++-+--++----+-++-+++++--+--+-+---++-++--++--++-+++-----+-++-++-++++++/||| |  | || ||||  ||   | | ||  |||   ||| \n' +
  '|| |    |     |   | || ||||  | \\--+--++++-+--++----+-++-+++++--+--+-+---++-++--++--++-+++-----+-++-++-/||||| ||| \\--+-++-++++--++---+-+-+/  |||   ||| \n' +
  '|| |    | /---+---+-++-++++\\ |   /+--++++-+--++-->-+-++-+++++--+--+-+---++-++--++--++-+++-----+-++-++--+++++-+++----+-++\\||||  ||   | | |   |||   ||| \n' +
  '|| | /--+-+---+---+-++-+++++-+---++--++++-+--++----+-++-+++++--+--+-+---++-++--++--++-+++-----+-++-++--+++++-+++\\   | |||||||  ||   | | |   |||   ||| \n' +
  '|| | |  | |   |   \\-++-+++++-+---++--++++-+--++----+-++-+++/|  | /+-+---++-++--++--++\\|||     | || ||  ||||| ||||   | |||||||  ||   | | |   |||   ||| \n' +
  '|| | |  | |   |  /--++-+++++-+---++--++++-+--++----+-++-+++-+--+-++-+---++-++--++--++++++-----+-++-++--+++++-++++\\  | |||||||  ||   | | |   |||   ||| \n' +
  '|| | |  | |   |  |  || ||\\++-+---++--++++-+--++----+-++-+++-+--+-++-+---++-++--++--++++++-----+-++-++--/|||| |||||  | |||||||  ||   | | |   |||   ||| \n' +
  '|| | |  | |   |  |  || || || |   |\\--++++-+--++----+-++-+++-+--+-++-+---++-++--++--++++/|     | || ||   |||| |||||  | |||||||  ||   | | |   |||   ||| \n' +
  '||/+-+--+-+\\  |  |  || || || |   |   |||| |  ||  /-+-++-+++-+--+-++-+---++-++--++\\ |||| |  /--+-++-++---++++-+++++--+-+++++++--++---+-+-+---+++--\\||| \n' +
  '\\+++-+--+-++--+--+--++-++-++-+---+---++++-+--+/  | | || ||| |  | || |/--++-++--+++-++++-+--+--+-++-++---++++-+++++--+-+++++++--++\\  | | |   |||  |||| \n' +
  ' ||| |  | ||  |  |  || || || |   |   |||| |  |   | | ||/+++-+--+-++-++--++-++--+++-++++-+--+--+-++-++---++++-+++++--+-+++++++--+++--+-+-+--\\|||  |||| \n' +
  ' ||| |  | ||  |  |  || || || |   |   |||| |  |   | | ||||\\+-+--+-++-++--++-++--+++-++++-+--+--+-+/ ||   |||| |||||  | |||||||  |||  | | |  ||||  |||| \n' +
  ' ||| |  | ||  |  |  || || || |   |   |||| |  |   | | |||| | |  | || ||  || ||  ||| |||| |  |  | |  ||   |||| |||||  | |||||||  |||  | | |  ||||  |||| \n' +
  ' ||| |/-+-++--+--+--++-++-++-+---+---++++-+--+---+-+-++++-+-+--+-++\\||  || ||  ||| |||| |  |  | |  ||   |||| |||||  | |||||||  |||  | | |  ||||  |||| \n' +
  ' ||| || | ||  |  |  || || || |/--+---++++-+--+---+-+-++++-+-+--+-+++++--++-++--+++-++++\\|  |  | |  ||   |||| |||||  |/+++++++--+++--+\\| |  ||||  |||| \n' +
  ' ||| || | ||  |  |  || || |v ||  |   |||| |  |   | | |||| | |  | |||||  || ||  ||| ||||||  |  | |  ||   \\+++-+++++--+++++++++--+++--+++-+--+/||  |||| \n' +
  ' ||| || | ||  |  |  \\+-++-++-/|  \\---++++-+--+---+-+-++++-+-+--+-+++++--++-++--+++-++++++--+--+-+--++----+++-+++++--++++/||||  |||  ||| |  | ||  |||| \n' +
  ' ||| \\+-+-++--+--+---+-++-++--+------++++-+--+---+-+-++++-+-+--+-+++++--++-++--+++-++++++--+--+-+--++----+++-+++/|  |||| ||||  |||  ||| |  | ||  |||| \n' +
  ' |||  | | ||  |  |   | |\\-++--+------++++-+--+---+-+-++++-+-+--+-+++++--++-++--+/| ||||||  |  | |  ||    ||| ||| |  |||| ||||  |||  ||| |  | ||  |||| \n' +
  ' |||  | | ||  |  |   | |  ||  | /----++++\\|  |   | | |||| | |  | |||||  || \\+--+-+-++++++--+--+-+--++----+++-+++-+--+++/ ||||  |||  ||| |  | ||  |||| \n' +
  ' |||  | | ||  |  |   | |  ||  | |    ||||||  |   | | |||| | |  | |||||  ||  |  | | ||||||  |  | |  ||    ||| ||| |  |||  ||||  |||  ||| |  | ||  |||| \n' +
  ' |||  | | ||  |  |   | |  ||  | |    ||||||  |/--+-+-++++-+-+--+-+++++--++\\ |  | | \\+++++--+--+-+--++----+++-++/ |  |||  ||||  |||  ||| |  | ||  |||| \n' +
  ' |||  | | ||  |  |   | |  ||  | |    ||||||  ||  | | |||| | |  | |||||  ||| |  | |  |||||  |  | |  ||    ||| ||  |  |||  ||||  |||  ||| |  | ||  |||| \n' +
  ' |||/-+-+-++--+--+---+-+--++--+-+-\\  ||||||  ||  | | |||\\-+-+--+-+++++--+++-+--+-+--+++++--+--+-+--++----+++-++--+--+++--+/||  |||  ||| |  | ||  |||| \n' +
  ' |||| | | ||  |  |   |/+--++--+-+-+--++++++--++--+-+\\|||  | |  | |||||  ||| |  | |  |||||  |  | |  ||    ||| ||  |  |||  | ||  |||  ||| |  | ||  |||| \n' +
  ' |||| | | ||  |  |   |||  ||  | | |  ||||||  ||  | |||||  | |  | |||||  ||| \\--+-+--+++++--+--/ |  ||    ||| ||  |  |||  | ||  |||  ||| |  | ||  |||| \n' +
  ' |||| | | ||  |  |   |||  ||  | | |  ||||||  ||  | |||^|  | |  | |||||  |||    | |  |||||  |    |  ||    ||| ||  |  |||  | ||  |||  ||| |  | ||  |||| \n' +
  ' |||| | | ||  |  |   |||  \\+--+-+-+--++/|||  ||  | |||||  | |  | |||||  |||    | |  |||||  |    |  ||    ||| ||  |  |||  | ||  |||  ||| |  | ||  |||| \n' +
  ' ||||/+-+-++--+--+---+++---+--+-+-+--++-+++--++--+-+++++--+-+--+-+++++--+++----+-+\\ |||||  |    |  ||    ||| ||  |  |||  | ||  |||  ||| |  | ||  |||| \n' +
  ' |||||| | ||  |  |   ||| /-+--+-+-+--++\\|||  ||  | |||||  | |  | |||||/-+++----+-++-+++++--+----+--++----+++-++--+-\\|||  | ||  |||  ||| |  | ||  |||| \n' +
  ' |||||| | ||  |  |/--+++-+-+--+-+-+--++++++--++--+-+++++--+-+--+-++++++-+++----+-++-+++++--+----+--++--\\ ||| ||  | ||||  | ||  |||  ||| |  | ||  |||| \n' +
  ' |||||| | ||  |  ||  ||| | |  | | |/-++++++--++--+-+++++--+-+--+-++++++-+++----+-++-+++++--+----+--++--+-+++-++--+-++++-\\| ||  |||  ||| \\--+-++--+/|| \n' +
  ' \\+++++-+-++--+--++--+++-+-+--+-+-++-++++++--++--+-+++/|  | |  | |||||| |||    \\-++-+++++--+----+--++--+-+++-++--+-++++-++-++--/||  |||    | ||  | || \n' +
  '  ||||| | ||  |  ||  ||| | |  | |/++-++++++--++--+\\||| |  | |  | |||||| |||      || |||||  |    |  |\\--+-+++-++--+-+/|| || ||   ||  |||    | ||  | || \n' +
  '  ||||| | ||  |  ||  ||| | |  \\-++++-++++++--++--+++++-+--+-+--+-++++++-+++------++-+++/|  |    |  |   | ||| ||  | | ||/++-++---++--+++----+-++\\ | || \n' +
  '  ||||\\-+-++--+--++--+++-+-+----++++-++++++--++--+++++-+--+-+--+-++/||| |||      || ||| |  |    |  |   | ||| ||  | | ||||| ||   ||  |||    | ||| | || \n' +
  '  ||||  | ||  |  ||  ||| | |    |||| |\\++++--++--+++++-+--+-+--+-++-+++-+++------++-+++-+--+----+--+---+-+++-++--+-+-+++++-++---++--++/    | ||| | || \n' +
  '  ||||  | \\+--+--++--+++-+-/    \\+++-+-++/|  ||  ||||| |  | |  | || ||| |||      || ||| |  |    |  |   | ||| ||  | | ||||| ||   ||  ||     | ||| | || \n' +
  '  ||||  |  |  |  ||  ||| |       ||| | || |  ||  ||||| |  | |  | || ||| |||      || ||| |  |    |  |   | ||| ||  | | ||||| ||   ||  ||     | ||| | || \n' +
  '  ||||  |  |  |  ||  ||| |       ||| \\-++-+--++--+++++-+--+-+--+-+/ ||| |||      || ||| |  |    |  |   | ||| ||  | | \\++++-++---++--+/     | ||| | || \n' +
  '  ||||  |  |  |  ||  ||| |       |||   || |  ||  ||||| |  | |  | |  ||| |||      || ||| |  |    |  | /-+-+++-++-\\| |  |||| ||   ||  |      | ||| | || \n' +
  '  ||||  |  |  |  ||  ||| |       |||   || |  ||  ||||| |  | |/-+-+--+++-+++------++-+++-+--+----+--+-+-+-+++-++-++-+--++++-++---++--+-----\\| ||| | || \n' +
  '  ||||  |  |  |/-++--+++-+-------+++---++-+--++--+++++-+--+-++-+-+--+++-+++------++-+++\\|  |    |  | | | ||| || || |  |||| ||   ||  |     || ||| | || \n' +
  '  ||||  |  |  || ||  ||| |       |||   || | /++--+++++-+--+-++-+-+--+++-+++------++-+++++-\\|    |  | | | ||| || || |  |||| ||   ||  |     || ||| | || \n' +
  '  ||||  |  |  || ||  ||| |       |||   || | |||  \\++++-+--+-++-+-+--+++-+++------/| ||||| ||    |  | | | ||| || v| |  |||| ||   ||  |     || ||| | || \n' +
  '  ||||  |  |  || ||  ||| |       |||   || | |||   |||\\-+--+-++-+-+--+++-+++-------+-+++++-++----+--+-+-+-+++-++-++-+--/||| ||   ||  |     || ||| | || \n' +
  '  ||||  |  |  || ||  ||| |       \\++---++-+-+++---/||  |  | || | |  ||| ||| /-----+-+++++-++----+--+-+\\| ||| || || |   ||| ||   ||  |     || ||| | || \n' +
  '  ||||  |  |  \\+-++--+++-+--------++---++-+-+++----++--+--+-++-+-+--+++-+++-+-----+-+++++-++----+--+-+++-++/ || || |   ||| ||   ||  |     || ||| | || \n' +
  '  ||||  |  |   | ||  |\\+-+--------++---++-+-+++----+/  |  | || \\-+--+++-+++-+-----+-+++++-++----+--+-+++-++--++-++-+---+++-++---++--/     || ||| | || \n' +
  '  ||||  |  |   | ||  | | |        ||   || | |\\+----+---+--+-++---+--+++-+++-+-----+-+++++-++----/  | ||| ||  || || |   ||| ||   ||        || ||| | || \n' +
  '  ||||  |  |   | \\+--+-+-+--------++---++-+-+-+----+---+--+-++---+--+++-+++-+-----+-+++++-++-------+-+++-++--++-+/ |   ||| ||   ||        || ||| | || \n' +
  '  ||||  |  |   |  |  | | |        ||   |\\-+-+-+----+---+--+-++---+--+++-+++-+-----+-+++++-++-------+-+++-++--+/ |  |   ||| ||   ||        || ||| | || \n' +
  '  ||||  |  |   |  |  | | |        || /-+--+-+-+----+>--+--+-++---+--+++-+++-+-----+-+++++-++-------+-+++-++--+--+--+---+++-++---++----\\   || ||| | || \n' +
  '  ||||  |  |   |  |  | | |        || | |  | | |    |   |  | |\\---+--+++-+++-+-----+-+++++-++-------+-+++-++--+--+--+---+++-++---++----+---/| ||| | || \n' +
  '  ||||  |  |   \\--+--+-+-+--------++-+-+--+-+-+----+---+--+-+----+--+++-+++-+-----+-+++/| ||       | ||| ||  |  |  |   ||| ||   ||  /-+----+-+++\\| || \n' +
  '  ||||  |  | /----+--+-+-+--------++-+-+-\\| | |    |   |  | |    |  ||\\-+++-+-----+-+++-+-++-------+-+++-++--+--+--/   ||| ||   ||  | |    | ||||| || \n' +
  '  ||||  |  | |  /-+--+-+-+-----\\  || | | ||/+-+----+---+--+-+----+--++--+++-+-----+-+++-+-++-------+\\||| ||  \\--+------+++-+/   ||  | |    | ||||| || \n' +
  '  ||||  |  | |  | |  | | |     |  || | | |||| |  /-+---+--+-+----+--++--+++-+-----+-+++-+-++-------+++++-++-----+------+++-+----++--+-+----+\\||||| || \n' +
  '  |||\\--+--+-+--+-+--+-+-+-----+--++-+-+-++++-+--+-+---+--+-+----+--++--+++-+-----/ ||| | ||       ||||| ||     |      ||| |    ||  | |    ||||||| || \n' +
  '  |||   |  | |  | |  | | |     |  || | | |||| |  | |   |  | |    |  ||  ||| \\-------+++-+-++-------+++/| ||     |      ||| |    ||  | |    ||||||| || \n' +
  '  |||   |  | |  | |  | \\-+-----+--++-+-+-++++-+--+-+---+--+-/    |  ||  ||| /-------+++-+-++--\\    ||| | ||     |      ||| |    ||  | |    ||||||| || \n' +
  '  |||   |  | |  | |  |   |     |  || | | |\\++-+--+-+---+--+------+--++--+++-+-------+++-/ ||  |    ||| | ||     |      ||| |    ||  | |    ||||||| || \n' +
  '  |||   |  | |  |/+--+---+-----+--++-+-+-+\\|| |  | |   |  |      |  ||  ||| |       |||   ||  |    ||| | ||     |      ||\\-+----++--+-+----+++++++-/| \n' +
  '  |||   |  | |  |||  |   |     |  || | | |||| |  | |   |  |      |  ||  \\++-+-------+++---++--+----+++-+-+/     |      \\+--+----++--+-+----++++/||  | \n' +
  '  ||\\---+--+-+--+++--+---+-----+--/| | | |||| \\--+-+---+--+------+--++---+/ |       |||   ||  |    ||| | |      |       |  |    ||  | |    |||| ||  | \n' +
  '  ||    |  | |  |||  |   |     |   | | | ||||    | |   |/-+------+--++---+--+------\\|||   ||  |    ||| | |      |       |  |    ||  | |    |||| ||  | \n' +
  '  ||    |  | |  |||  |   \\-----+---+-+-/ ||||    | |   || |      |  ||   |  |      ||||   ||  |    ||| | |      |       |  |    ||  | |    |||| ||  | \n' +
  '  ||    |  | |  |||  |         |   | |   ||||    | |   \\+-+------+--++---+--+------++++---++--+----+++-+-+------+-------+--+----++--+-+----/||| ||  | \n' +
  '  ||    |  | |  |||  |         |   | |   ||||    | |    | |      |  \\+---+--+------+++/   |\\--+----+++-+-+------+-------+--+----++--+-+-----+++-+/  | \n' +
  '  ||    |  | |  |||  |         |   | |   ||||    | |    |/+------+---+---+--+------+++----+---+----+++-+-+----\\ |       |  |    ||  | |     ||| |   | \n' +
  '  \\+----+--/ |  \\++--+---------/   | |   ||||    | |    |||      |   |   |  |      |||    |   |    ||| | |    | |       |  |    ||  \\-+-----+++-/   | \n' +
  '   |    |    |   ^|  |             | |   ||||    | |    |||      |   |   |  |      |||    |   |    ||| | |    | |       |  |    ||    |     |||     | \n' +
  '   |    |    |   ||  |             | |   ||||    | |    |||      |   |   |  |      |||    |   |    ||| | |    | |       |  |    ||    |     |||     | \n' +
  '   |    |    |   \\+--+-------------+-+---+/|\\----+-+----+++------+---+---+--+------+++----/   |    ||| | |    | |       |  |    ||    |     |||     | \n' +
  '   |  /-+----+----+--+------\\      | |   | |     \\-+----+++------+---+---+--+------+++--------+----+++-+-+----+-+-------+--+----++----+-----/||     | \n' +
  '   |  | |    |    |  |      |      | |   | |       |    |||      |   \\---+--+------+++--------+----+++-+-+----+-+-------+--+----+/    |      ||     | \n' +
  '   |  | | /--+----+--+------+------+-+---+-+----\\  |    \\++------+-------+--+------/||        |    ||| | |    | |       |  |    |     |      ||     | \n' +
  '   \\--+-+-+--+----+--/      |      | |   | |    |  |     ||      |       |  \\-------++--------/    ||| | |    | |       |  |    |     |      ||     | \n' +
  '      | \\-+--+----+---------+------+-+---+-+----+--+-----++------+-------+----------++-------------+++-+-/    | |       |  |    |     |      ||     | \n' +
  '      |   |  |    |         |      | |   | |    |  |     ||      |       |          ||         /---+++-+------+-+-------+--+----+--\\  |      ||     | \n' +
  '      |   |  |    |         |      | |   | |    |  |     \\+------+-------+----------++---------+---+++-+------/ |       |  |    |  |  |      ||     | \n' +
  '      |   |  |    |         |      | |   | |    |  \\------+------+-------+----------++---------+---/|\\-+--------/       |  |    |  |  |      ||     | \n' +
  '      |   |  |    |         |      | |   | \\----+---------+------+-------+----------++---------+----/  |                |  |    |  |  |      ||     | \n' +
  '      |   |  |    |         |      | \\---+------+---------+------+-------+----------++---------+-------+----------------+--+----+--+--/      ||     | \n' +
  '      |   |  |    |         |      |     |      |         |      |       \\----------++---------+-------+----------------+--+----+--+---------/|     | \n' +
  '      |   |  |    |         |      |     |      |         \\------+------------------/|         |       |                |  |    |  |          |     | \n' +
  '      |   |  |    \\---------+------+-----+------+----------------+-------------------+---------+-------/                |  \\----+--+----------+-----/ \n' +
  '      |   \\--+--------------+------+-----+------/                |                   |         |                        |       |  |          |       \n' +
  '      |      |              |      |     |                       \\-------------------/         |                        |       |  |          |       \n' +
  '      |      \\->------------+------+-----/                                                     \\------------------------+-------+--/          |       \n' +
  '      \\---------------------/      \\--------------->--------------------------------------------------------------------/       \\-------------/       ';

const tracks = input.split('\n').map(line => line.split(''));

const directions = {
  '^': [-1, 0],
  '>': [0, 1],
  'v': [1, 0],
  '<': [0, -1]
}

const trackReplacement = {
  '^': '|',
  '>': '-',
  'v': '|',
  '<': '-'
}

const numberOfRows = tracks.length;
const numberOfColumns = tracks[0].length;

let trains = [];

// Initialise trains.
for (let i = 0; i < numberOfRows; i++) {
  for (let j = 0; j < numberOfColumns; j++) {
    const symbol = tracks[i][j];
    if ('^>v<'.indexOf(symbol) !== -1) {
      const train = {
        position: [i, j],
        direction: directions[symbol],
        nextTurn: 'L'
      }
      tracks[i][j] = trackReplacement[symbol];
      trains.push(train);
    }
  }
}

function getNextDirection(train) {
  const [i, j] = train.position;
  const track = tracks[i][j];
  if (track === '-' || track === '|') {
    return train.direction;
  }
  const direction = train.direction;
  const di = direction[0];
  const dj = direction[1];
  if (track === '/') {
    if (di === 0) {
      if (dj === 1) { // >
        return directions['^'];
      } else { // <
        return directions['v'];
      }
    } else {
      if (di === -1) { // ^
        return directions['>'];
      } else { // v
        return directions['<'];
      }
    }
  } else if (track === '\\') {
    if (di === 0) {
      if (dj === 1) { // >
        return directions['v'];
      } else { // <
        return directions['^'];
      }
    } else {
      if (di === -1) { // ^
        return directions['<'];
      } else { // v
        return directions['>'];
      }
    }
  } else {
    if (train.nextTurn === 'L') {
      train.nextTurn = 'S';
      return [-dj, di];
    } else if (train.nextTurn === 'S') {
      train.nextTurn = 'R';
      return [di, dj];
    } else if (train.nextTurn === 'R') {
      train.nextTurn = 'L';
      return [dj, -di];
    }
  }
}

function run(stopAtFirstCollision) {
  while (trains.length > 1) {
    trains.sort((t1, t2) => t1.position[0] - t2.position[0] || t1.position[1] - t2.position[1]);
    for (let train of trains) {
      train.position[0] += train.direction[0];
      train.position[1] += train.direction[1];
      train.direction = getNextDirection(train);
      const positions = new Set(trains.map(t => t.position.toString()));
      if (positions.size < trains.length) {
        if (stopAtFirstCollision) {
          return train.position;
        } else {
          // Remove crashes.
          trains = trains.filter((t0, i0) => !trains.find((t1, i1) => t0.position.toString() === t1.position.toString() && i0 !== i1));
        }
      }
    }
  }
  return trains[0].position;
}

// Swap from (i, j) to (x, y).
console.log(run(false).reverse());
